# Priority 2 요구사항 – Column Order Drag & Drop

## 목적

칸반 보드의 사용성 향상을 위해 사용자가 **칼럼의 순서를 마우스 드래그 앤 드롭으로 자유롭게 변경**할 수 있도록 한다.

## 범위

- **포함**: 보드 상세 페이지에서 칼럼 좌우 재배열, 실시간 백엔드 동기화, 접근성 지원(키보드).
- **제외**: 다중 보드 간 칼럼 이동, 칼럼 내 카드 순서 재정렬(이미 구현됨).

## 기능 요구사항

| ID | 제목 | 설명 | 우선순위 |
|----|------|------|----------|
| FR-04a | 칼럼 드래그 앤 드롭 | 사용자가 마우스로 칼럼을 잡아 다른 위치로 옮길 수 있어야 한다. | Must |
| FR-04b | 순서 변경 저장 | 드롭한 칼럼의 새로운 위치(position)를 즉시 백엔드에 저장한다. | Must |
| FR-04c | 실패 시 롤백 | 저장 실패 시 이전 순서로 자동 복원하고 사용자에게 알린다. | Must |
| FR-04d | 키보드 네비게이션 | Ctrl+← / Ctrl+→로 선택된 칼럼을 좌우로 이동할 수 있다. | Should |
| FR-04e | 시각적 피드백 | 드래그 중에는 칼럼이 반투명해지고 호버 위치가 하이라이트된다. | Should |

## UX·인터랙션 요구사항

1. **명확한 드래그 표시**: 드래그 중인 칼럼은 시각적으로 구분되어야 한다.
2. **부드러운 애니메이션**: 드롭 완료 후 칼럼이 300ms 이내에 최종 위치로 이동한다.
3. **즉시 피드백**: API 응답 대기 중에도 UI는 즉시 변경되어(낙관적 업데이트) 사용자 경험을 중단하지 않는다.
4. **오류 표시**: 저장 실패 시 토스트 알림으로 안내하고, 자동으로 이전 상태로 복원한다.
5. **접근성**: 마우스가 없는 사용자도 키보드로 칼럼을 이동할 수 있어야 한다.

## 비기능 요구사항

| 항목 | 기준 |
|------|------|
| 성능 | 드래그 시작~드롭까지 100ms 이내 UI 응답 |
| 신뢰성 | 네트워크 오류 시 자동 재시도(최대 3회), 실패 시 상태 복원 |
| 호환성 | 모든 모던 브라우저(Chrome, Firefox, Safari, Edge) 지원 |
| 접근성 | WCAG 2.1 AA 준수, 키보드 포커스 링 표시 |

## 가정 및 제약

- 백엔드의 칼럼 `position` 필드와 업데이트 로직은 이미 구현되어 있다.
- 프론트엔드는 `@dnd-kit` 라이브러리를 사용하여 구현한다.
- 모바일 터치 지원은 Priority 3 이상에서 별도로 다룬다.

## 미해결 이슈

1. 여러 사용자가 동시에 칼럼 순서를 변경할 때 충돌 해결 전략을 정의해야 한다.
2. 변경 이력을 활동 로그에 남길지 여부를 결정해야 한다.
3. 칼럼 순서 변경에 대한 실시간 협업 알림이 필요한지 확인이 필요하다.
