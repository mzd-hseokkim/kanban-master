# spec-columns-002 — 컬럼 관리 PRD

## 1. 개요
- 각 보드의 워크플로우 단계를 정의하는 컬럼을 유연하게 구성·정렬·관리할 수 있도록 한다.
- 컬럼 관리가 카드 작업과 자연스럽게 연동되도록 드래그앤드롭 UX를 핵심으로 설계한다.

## 2. 연계 요구사항
- FR-04 컬럼 관리

## 3. 사용자 시나리오
1. 프로젝트 리드가 새 보드 생성 직후 “아이디어 → 진행 중 → 검토 → 완료” 순으로 컬럼을 정의한다.
2. 팀원이 특정 컬럼 이름을 변경하여 도메인 언어를 맞춘다.
3. 회고 결과를 반영해 컬럼 순서를 끌어다 놓기만으로 재배치한다.

## 4. 디자인 가이드라인
- 컬럼 헤더에는 이름, 카드 수, 옵션 메뉴(편집/삭제)가 포함된다.
- 컬럼 추가 버튼은 보드 우측 끝 또는 헤더 영역에서 항상 접근 가능해야 한다.
- 드래그 중인 컬럼은 유리 조각 스타일의 음영과 확대 효과를 적용해 현재 위치를 명확히 한다.
- 빈 컬럼 내부에는 “카드를 끌어다 놓거나 새 카드 추가” 안내문과 CTA를 배치한다.

## 5. 프론트엔드 규격
- **컴포넌트**
  - `ColumnList`: 가로 스크롤 가능한 래퍼, 컬럼 너비는 최소 320px 유지.
  - `ColumnHeader`: 이름 인라인 편집, 카드 수 배지, 메뉴 버튼을 포함한다.
- **상호작용**
  - 컬럼 드래그는 데스크톱(마우스)·모바일(터치) 모두 지원해야 하며, 이동 완료 시 Optimistic UI로 순서를 즉시 반영한다.
  - 이름 수정은 헤더 더블클릭 또는 메뉴에서 “컬럼 이름 변경” 선택 시 인라인 입력으로 전환된다.
- **상태 동기화**
  - 순서 변경 시 임시 순서를 프론트 상태에 저장하고, 서버 응답 실패 시 원래 위치로 롤백한다.
  - 컬럼 삭제 시 해당 컬럼의 카드 처리 정책(예: 다른 컬럼으로 이동, 일괄 아카이브)을 선택하도록 다이얼로그를 띄운다.

## 6. 백엔드 규격
- **엔드포인트**
  - `POST /api/v1/boards/{boardId}/columns`
  - `PATCH /api/v1/boards/{boardId}/columns/{columnId}`
  - `DELETE /api/v1/boards/{boardId}/columns/{columnId}`
  - `PUT /api/v1/boards/{boardId}/columns/reorder` (새 인덱스 배열 수신)
- **도메인 규칙**
  - 컬럼 이름 1~50자, 보드당 컬럼 수 최대 20개.
  - 순서를 나타내는 정수 필드를 사용하며, 재정렬 시 일괄 업데이트한다.
  - 컬럼 삭제 시 카드 처리 옵션(`archive`, `moveToColumnId`)을 필수 파라미터로 받는다.

## 7. 수용 기준
1. 컬럼 추가 후 즉시 보드에 표시되고 카드 추가 기능이 활성화된다.
2. 이름 변경 시 페이지 리로드 없이 반영되며, 다른 사용자 화면에도 실시간 반영된다(실시간 동기화 기반).
3. 드래그앤드롭으로 순서를 변경하면 서버에 저장되어 새로고침 후에도 동일 순서가 유지된다.
4. 컬럼 삭제 시 카드 처리 옵션을 선택하지 않으면 요청이 실패하고 안내 메시지를 제공한다.

## 8. 구현 순서
1. 백엔드 컬럼 엔티티 및 정렬 로직, 삭제 옵션 구현.
2. 프론트 컬럼 리스트·헤더 컴포넌트, 드래그앤드롭 베이스 구축.
3. 실시간 동기화(예: SSE/WebSocket) 또는 폴링으로 컬럼 변경 사항을 전파.
